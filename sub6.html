<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>빛의 검 퍼뎀 비율 계산기</title>
    <style>
        /* 스타일은 생략 */
    </style>
    <script>
        function cal() {
            // 입력값 가져오기
            var dal = Number(document.getElementById("dal").value);
            var dcl = Number(document.getElementById("dcl").value);
            var dpp = Number(document.getElementById("dpp").value);
            var hcl = Number(document.getElementById("hcl").value);
            var hcr = Number(document.getElementById("hcr").value);
            var hpp = Number(document.getElementById("hpp").value);
            var boss = 100;

            // 주사위 파워업 상태 조정
            hcl -= 7;
            hpp -= 1;
            dpp -= 1;

            // 공격 속도 계산
            var atspd = (dcl * dal + 2 * dpp) * 1.03;
            // 최대값 설정
            if (atspd > 95) {
                atspd = 95;
            }

            // 공격 횟수 계산
            var atcount = (1 / 0.7) * hcr / (1 - atspd / 100);
            
            // atspd가 100% 이상이면 최대치로 설정
            if (atspd >= 100) {
                atspd = 100;
                atcount = 0; // 공격 횟수를 0으로 설정하여 무한대 오류 방지
            }

            // 보스 체력 감소 계산
            while (atcount >= 1) {
                boss = boss * (1 - 0.02 * 0.005 * hcl) * (100 / (3 + 0.3 * hcl + 0.1 * hpp));
                atcount -= 1;
            }

            // 결과 표시
            document.getElementById("res").value = boss.toFixed(2);
        }
    </script>
</head>
<body>
    <!-- HTML 코드는 이전과 동일 -->
</body>
</html>
