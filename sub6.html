<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>빛의 검 퍼뎀 비율 계산기</title>
    <style>
        /* 스타일은 생략 */
    </style>
    <script>
        function cal() {
            // 입력값 가져오기
            var dal = Number(document.getElementById("dal").value);
            var dcl = Number(document.getElementById("dcl").value);
            var dpp = Number(document.getElementById("dpp").value);
            var hcl = Number(document.getElementById("hcl").value);
            var hcr = Number(document.getElementById("hcr").value);
            var hpp = Number(document.getElementById("hpp").value);
            var boss = 100;

            // 주사위 파워업 상태 조정
            hcl -= 7;
            hpp -= 1;
            dpp -= 1;

            // 공격 속도 계산
            var atspd = (dcl * dal + 2 * dpp) * 1.03;
            // 최대값 설정
            if (atspd > 95) {
                atspd = 95;
            }

            // 공격 횟수 계산
            var atcount = (1 / 0.7) * hcr / (1 - atspd / 100)/ (100 / (3 + 0.3 * hcl + 0.1 * hpp))/100;
            
            // atspd가 100% 이상이면 최대치로 설정
            if (atspd >= 100) {
                atspd = 100;
                atcount = 0; // 공격 횟수를 0으로 설정하여 무한대 오류 방지
            }

            // 보스 체력 감소 계산
            while (atcount >= 1) {
                boss = boss * (1 - 0.02 * 0.005 * hcl) * (100 / (3 + 0.3 * hcl + 0.1 * hpp));
                atcount -= 1;
            }

            // 결과 표시
            document.getElementById("res").value = boss.toFixed(2);
        }
    </script>
</head>
<body>
       <div class="header">
        <img src="img3.PNG" height="50" width="110" alt="한방 딜 계산기">
        <span>빛의 검 퍼딜 비율 계산기!</span>
    </div>
    <div class="calculator-container">
        <form action="#">
            <div class="calculator-input">
                <label for="dcl">달주사위 클래스를 선택하세요</label>
                <select name="달주사위" id="dcl" style="font-size: 1em;">
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                </select>
            </div>
            <div class="calculator-input">
                <label for="dal">달주사위 눈금을 선택하세요.</label>
                <select name="주사위 눈금" id="dal" style="font-size: 1em;">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                </select>
            </div>
            <div class="calculator-input">
                <label for="dpp">달주사위 파워업 상태를 선택하세요.</label>
                <select name="주사위 클래스" id="dpp" style="font-size: 1em;">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <div class="calculator-input">
                <label for="hcl">빛의 검 주사위 클래스를 선택하세요</label>
                <select name="빛검주사위" id="hcl" style="font-size: 1em;">
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                </select>
            </div>
            <div class="calculator-input">
                <label for="hcr">빛의 검 주사위 눈금을 입력하세요.</label>
                <input type="text" id="hcr">
            </div>
            <div class="calculator-input">
                <label for="hpp">빛의 검 주사위 파워업 상태를 선택하세요.</label>
                <select name="주사위 클래스" id="hpp" style="font-size: 1em;">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            <button onclick="cal()">계산하기</button>
            <div class="result">
                남은 보스 체력(단위 : %) : <input type="text" id="res" style="font-size: 1.2em;">
            </div>
        </form>
    </div>
    <!-- HTML 코드는 이전과 동일 -->
</body>
</html>
