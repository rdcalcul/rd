<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>딜량 계산기</title>
<font size=5>
<script>
function numberToKorean(number) {
    var inputNumber = number < 0 ? false : number;
    var unitWords = ["", "만", "억", "조", "경"];
    var splitUnit = 10000;
    var splitCount = unitWords.length;
    var resultArray = [];
    var resultString = "";

    for (var i = 0; i < splitCount; i++) {
      var unitResult =
        (inputNumber % Math.pow(splitUnit, i + 1)) / Math.pow(splitUnit, i);
      unitResult = Math.floor(unitResult);
      if (unitResult > 0) {
        resultArray[i] = unitResult;
      }
    }
    for (var i = 0; i < resultArray.length; i++) {
      if (!resultArray[i]) continue;
      resultString = String(resultArray[i]) + unitWords[i] + resultString;
    }
    return resultString;
  }
function cal()
{
	var crit=Number(document.getElementById("crit").value);
	var dill =document.getElementById("dill").value;
	var clas =Number(document.getElementById("clas").value);
	var dal=document.getElementById("dal").value;
	var stack=Number(document.getElementById("stack").value);
	var lev=Number(document.getElementById("lev").value);
	var lcs=Number(document.getElementById("lcs").value);
	var leye=Number(document.getElementById("leye").value);
	var deye=Number(document.getElementById("deye").value);
	var dam;
	var res;
	clas-=7;
	lev-=1;
	var atspd=Math.floor(lcs*leye+8);
	if(atspd>95){
		atspd=95;
	}
	lev-=1
	crit/=100;
	if(dal==1){
		if(dill=="sav"){
			dam = 100+20*lev+clas*10;
			while(stack>0){
				dam=dam*(50+0.5*clas)/100+dam;
				stack-=1;
			}
		}
		if(dill=="ovl"){
			dam=400;
			while(stack>0){
				dam=dam+dam*(0.3+0.01*clas);
				stack-=1;
				crit=crit+crit*(0.4+0.01*clas);
			}
			dam=dam*(1/1.7);
			crit=crit*(1/1.7);
		}
		if(dill=="rech"){
			dam=(300-30*clas+5*stack*(stack-1))/1.5;
		}
		if(dill=="sym"){
			dam=(30+(60+20*clas+20*lev)*(stack-1))*2;
		}
		if(dill=="combo"){
			dam=((8+lev+2*clas)*(stack+1)*stack/2+50*lev+10*clas)*5/6;
		}
		if(atspd*1.03>95) {
			dam=((0.65*dam+0.65*dam*crit*0.35)+(0.65*dam+0.65*dam*crit*0.35)*leye*0.1)/0.05;
		}
		else{
			dam=((0.65*dam+0.65*dam*crit*0.35)+(0.65*dam+0.65*dam*crit*0.35)*leye*0.1)/(1-atspd*1.03/100);
		}
	}
	if(dal==2){
		if(dill=="sav"){
			dam = 100+20*lev+clas*10;
			while(stack>0){
				dam=dam*(50+0.5*clas)/100+dam;
				stack-=1;
			}
		}
		if(dill=="ovl"){
			dam=400;
			while(stack>0){
				dam=dam+dam*(0.3+0.01*clas);
				stack-=1;
				crit=crit+crit*(0.4+0.01*clas);
			}
			dam=dam*(1/1.7);
			crit=crit*(1/1.7);
		}
		if(dill=="rech"){
			dam=(300+30*clas+5*stack*(stack-1))/1.5;
			}
		if(dill=="sym"){
			dam=(30+(60+20*clas+20*lev)*(stack-1))*2;
		}
		if(dill=="combo"){
			dam=((8+lev+2*clas)*(stack+1)*stack/2+50*lev+10*clas)*5/6;
		}
        	dam=(0.95*dam+dam*crit*0.05)/(1-atspd/100);
	}
	if(dal==3){
		if(dill=="sav"){
			dam = 100+clas*10;
			while(stack>0){
				dam=dam*(50+0.5*clas)/100+dam;
				stack-=1;
			}
		}
		if(dill=="ovl"){
			dam=400;
			while(stack>0){
				dam=dam+dam*(0.3+0.01*clas);
				stack-=1;
				crit=crit+crit*(0.4+0.01*clas);
			}
			dam=dam*(1/1.7);
			crit=crit*(1/1.7);
		}
		if(dill=="rech"){
			dam=(300+30*clas+5*stack*(stack-1))/1.5;
			}
		if(dill=="sym"){
			dam=(30+(60+20*lev+20*clas)*(stack-1))*2;
		}
		if(dill=="combo"){
			dam=((8+lev+2*clas)*(stack+1)*stack/2+50*lev+10*clas)*5/6;
		}
		dam=0.95*dam+0.65*dam*crit*0.05;
	}
	dam=Math.floor(deye*dam);
	document.getElementById("res").value = numberToKorean(dam);
}
</script>
</head>
<body>
<img src="img3.PNG" height="50" width="110"><font size=7>딜량(DPS)계산기!</font><br><br>
<div>딜량 계산기입니다. 아래의 과정을 틀리지 않게 진행해주세요. 달주사위가 없을 경우에도 크리티컬을 고려한 평균값이 나옵니다.</div><br><br>
크리티컬을 입력해 주세요 : <input type="text" id="crit" style="font-size: 1em;"><br><br>
<form action="#" >
  <label for="lang">딜주사위를 선택하세요</label>
  <select name="딜주사위" id="dill" style="font-size: 1em;">
	<option value="void">선택하세요</option>
    <option value="sol">태양(준비중</option>
    <option value="sav">수호자</option>
    <option value="ovl">과열</option>
    <option value="rech">충전</option>
    <option value="sym">영혼수집</option>
    <option value="combo">콤보</option>
    <option value="ready">준비중....</option>
  </select>
</form><br>
<form action="#" >
  <label for="lang">주사위 클래스를 선택하세요. </label>
  <select name="주사위 클래스" id="clas" style="font-size: 1em;">
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
	<option value="14">14</option>
	<option value="15">15</option>
  </select>
</form><br>
<form action="#" >
  <label for="lang">딜주사위 눈금을 선택하세요</label>
  <select name="딜눈금" id="deye" style="font-size: 1em;">
    <option value="71">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    </select>
</form><br>
<form action="#" >
  <label for="lang">주사위 파워업 상태를 선택하세요(충전 과열 제외)</label>
  <select name="파워업" id="lev" style="font-size: 1em;">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
  </select>
</form><br>
만약 스택에(충전/과열의 경우 레벨) 따라 딜이 달라진다면 스택(충전의 경우 레벨)을 입력하세요 : <input type="text" id="stack" style="font-size: 1em;"><br><br>
<form action="#" >
  <label for="lang">달주사위 존재/활성화 여부를 선택하세요</label>
  <select name="달주사위" id="dal" style="font-size: 1em;">
    <option value="1">활성화 된 달주사위</option>
    <option value="2">활성화 안 된 달주사위</option>
    <option value="3">달주사위 없음</option>
  </select>
</form><br>
<form action="#" >
  <label for="lang">달주사위 클래스를 선택하세요</label>
  <select name="달주사위" id="lcs" style="font-size: 1em;">
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    </select>
</form><br>
<form action="#" >
  <label for="lang">달주사위 눈금을 선택하세요</label>
  <select name="달주사위" id="leye" style="font-size: 1em;">
    <option value="71">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    </select>
</form><br>
<input type="button" value="계산하기" onclick="cal()" style="font-size: 1em;"><br><br>
결과 : <input type="text" id="res" style="font-size: 1em;">
</body>
</html>
